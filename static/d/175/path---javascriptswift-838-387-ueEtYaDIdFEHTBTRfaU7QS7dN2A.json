{"data":{"site":{"siteMetadata":{"title":"Matvii Hodovaniuk","author":"Matvii Hodovaniuk"}},"markdownRemark":{"id":"81ec8842-e9ea-5451-bf05-29a0c3087ae4","excerpt":"Source What problem does JavaScript.swift solve? My work experience mostly consist from Front End tasks. Use packages from  NPM  is common solution . I tried…","html":"<p><a href=\"https://github.com/hodovani/JavaScript.swift\">Source</a></p>\n<h2>What problem does JavaScript.swift solve?</h2>\n<p>My work experience mostly consist from Front End tasks. Use packages from <a href=\"https://www.npmjs.com\">NPM</a> is common solution .</p>\n<p>I tried <a href=\"https://developer.apple.com/swift/\">Swift</a> for last two months and found that amount of ready solution in package managers is smaller than in NPM.</p>\n<p>Also in Swift 5.0 will be <a href=\"https://github.com/apple/swift-evolution/blob/master/proposals/0216-dynamic-callable.md\">@dynamicCallable</a> that already help to run Python in Swift.</p>\n<p>I wonder what will be good to have same with JavaScript. I found <a href=\"https://developer.apple.com/documentation/javascriptcore\">JavsScriptCore</a> help execute JavaScript inside app for Apple platform.</p>\n<p>Do you remember the day when you need some small form for purchase or lib with financial formulas full covered with tests and with fresh commit from active contributors?</p>\n<p>One solution for that checks if it already exists on CocoaPods or Swift Package Manager or Carthage.</p>\n<p>But…</p>\n<p>What if we could grab this solution from the largest package base in the world Node Package Manager.</p>\n<p>Take a JavaScript package to solve a problem will be the term solution, just to fast check our problem solution work. If it is true we will recreate the JavaScript package in Swift for safe.</p>\n<p>NPM has a lot of packages that can be used for free and easy to install.\nSwift is a powerful and intuitive programming language that can be run both Apple’s device and Linux.</p>\n<p>How to meet these two beautiful universes?</p>\n<p>Let’s think…</p>\n<p>It will be good to have the ability to add JavaScript packages from npm to swift.</p>\n<p>The ability to run JavaScript in Swift already exists with JavaScriptCore\nThis solution would look like this one:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token builtin\">JavaScriptCore</span>\n<span class=\"token keyword\">let</span> jsSource <span class=\"token operator\">=</span> <span class=\"token string\">\"var testFunct = function(message) { return \\\"Test Message: \\\" + message;}\"</span>\n<span class=\"token keyword\">var</span> context <span class=\"token operator\">=</span> <span class=\"token function\">JSContext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ncontext<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">evaluateScript</span><span class=\"token punctuation\">(</span>jsSource<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> testFunction <span class=\"token operator\">=</span> context<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">objectForKeyedSubscript</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"testFunct\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> result <span class=\"token operator\">=</span> testFunction<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>withArguments<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"the message\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// result would be Test Message: the message.</span></code></pre></div>\n<p>Yeah, look nice.\nBut it would be good to have some sort of <code class=\"language-text\">import</code> or <code class=\"language-text\">require</code> to fast import and use.</p>\n<p>Like this one:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token comment\">// here `arr-diff` will return different between two passed arrays</span>\n<span class=\"token keyword\">let</span> arrDiff <span class=\"token operator\">=</span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span>“arr<span class=\"token operator\">-</span>diff”<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">let</span> diff <span class=\"token operator\">=</span> <span class=\"token function\">arrDiff</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// diff will hold array of diffrenece and will be equal to `[1, 3]`</span></code></pre></div>\n<p>*<a href=\"https://www.npmjs.com/package/arr-diff\">arr-diff</a></p>\n<h2>What we can have right now?</h2>\n<p>JavaScript.Swift provides an API to <code class=\"language-text\">import</code> JS code.\nWe need a simple working bridge.\nUse it to import JavaScript code. Example:</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token builtin\">JavaScriptSwift</span>\n\n<span class=\"token keyword\">let</span> context <span class=\"token operator\">=</span> <span class=\"token function\">JavaScriptSwift</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">try</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">importSafe</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span>\"\n<span class=\"token keyword\">var</span> conference <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Swift Island\"</span><span class=\"token punctuation\">,</span>\n    organizers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n            name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Niels\"</span><span class=\"token punctuation\">,</span>\n            twitter<span class=\"token punctuation\">:</span> <span class=\"token string\">\"@nvh\"</span><span class=\"token punctuation\">,</span>\n            email<span class=\"token punctuation\">:</span> <span class=\"token string\">\"niels@swiftisland.nl\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n            name<span class=\"token punctuation\">:</span> <span class=\"token string\">\"Sidney de Koning\"</span><span class=\"token punctuation\">,</span>\n            twitter<span class=\"token punctuation\">:</span> <span class=\"token string\">\"@sidneydekoning \"</span><span class=\"token punctuation\">,</span>\n            email<span class=\"token punctuation\">:</span> <span class=\"token string\">\"sidney@swiftisland.nl\"</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token string\">\"\"</span>\"<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">var</span> conference <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span>conference\n<span class=\"token comment\">// conference will be \"Swift Island\"</span></code></pre></div>\n<p>This is not <code class=\"language-text\">import</code> that we need but what we can use right now.</p>\n<p>See more examples <a href=\"https://github.com/hodovani/JavaScript.swift/blob/master/Tests/JavaScriptSwiftTests/JavaScriptSwiftTests.swift\">here</a>\nWhat’s the future roadmap?<br/>\nIn future we will have:\nThe <code class=\"language-text\">import</code> that we need. The <code class=\"language-text\">import</code> that will allow us to call methods from npm package. And give ability to import any package from npm</p>\n<p>Summary</p>\n<p>It was interesting to me to dive into the Swift world. I plan to learn more and share with you.</p>\n<p>Please leave feedback on:</p>\n<ul>\n<li><a href=\"https://github.com/hodovani/JavaScript.swift\">Github</a><br/></li>\n<li><a href=\"https://twitter.com/hodovani\">Twitter</a><br/></li>\n<li><a href=\"matvii@hodovani.uk\">Mail</a></li>\n</ul>\n<p>Thanks, <a href=\"https://twitter.com/maxdesiatov\">Max</a> for code review and inspiration</p>","frontmatter":{"title":"JavaScript.swift","date":"February 02, 2019"}}},"pageContext":{"slug":"/javascriptswift/","previous":{"fields":{"slug":"/hi-folks/"},"frontmatter":{"title":"New Beginnings"}},"next":null}}